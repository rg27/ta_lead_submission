<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Note: Zoho SDK is assumed to be available in the environment -->
    <script src="https://live.zwidgets.com/js-sdk/1.2/ZohoEmbededAppSDK.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/index.css">
  </head>
  <body>
    <div class="form-container">
      <form id="record-form" novalidate>
        <div class="form-group">
          <label for="first-name">First Name <span class="required-star">*</span></label>
          <input type="text" id="first-name" name="first-name" required />
          <span class="error-message" id="error-first-name"></span>
        </div>
        
        <div class="form-group">
          <label for="last-name">Last Name <span class="required-star">*</span></label>
          <input type="text" id="last-name" name="last-name" required />
          <span class="error-message" id="error-last-name"></span>
        </div>
        
        <div class="form-group">
          <label for="email">Email <span class="required-star">*</span></label>
          <input type="email" id="email" name="email" required />
          <span class="error-message" id="error-email"></span>
        </div>
        
        <div class="form-group">
          <label for="mobile">Mobile</label> <!-- Field is now optional -->
          <input type="tel" id="mobile" name="mobile" /> <!-- Removed required attribute -->
          <span class="error-message" id="error-mobile"></span>
        </div>
        
        <div class="form-group">
          <label for="lead-source-select">Lead Source <span class="required-star">*</span></label>
          <select id="lead-source-select" name="lead-source-select" required>
            <option value="" disabled selected>Select ...</option>
            <option value="Business Partner Referrals">Business Partner Referrals</option>
            <option value="Employee Referrals">Employee Referrals</option>
            <option value="Existing Clients - Referrals">Existing Clients - Referrals</option>
            <option value="External Referrals">External Referrals</option>
            <option value="Walked In">Walked In</option>
            <option value="Word of Mouth">Word of Mouth</option>
          </select>
          <span class="error-message" id="error-lead-source-select"></span> 
        </div>
        
        <!-- Conditional Field Groups -->
        <div class="form-group"> 
          <div class="hidden-field-group" id="business-partner-group">
            <label for="business-partner">Business Partner <span class="required-star">*</span></label>
            <select id="business-partner" name="business-partner" required>
              <option value="" disabled selected>Select Business Partner ...</option>
              <!-- Add dynamic partner options here -->
            </select>
            <span class="error-message" id="error-business-partner"></span> 
          </div>
        </div>
      
        <div class="form-group">
          <div class="hidden-field-group" id="employee-name-group">
            <label for="employee-name">Employee Name <span class="required-star" required>*</span></label>
            <select id="employee-name" name="employee-name" required>
              <option value="" disabled selected>Select ...</option>
              <!-- Employee names will be populated dynamically via Zoho API -->
            </select>
            <span class="error-message" id="error-employee-name"></span>
          </div>
        </div>

        <div class="hidden-field-group" id="referrer-details-group">
          <div class="form-group">
            <label for="referrer-full-name">Referrer's Full Name <span class="required-star">*</span></label>
            <input type="text" id="referrer-full-name" name="referrer-full-name" required />
            <span class="error-message" id="error-referrer-full-name"></span>
          </div>

          <div class="form-group">
            <label for="contact-number">Contact Number</label> <!-- Field is now optional -->
            <input type="text" id="contact-number" name="contact-number" /> <!-- Removed required attribute -->
            <span class="error-message" id="error-contact-number"></span>
          </div>
              
          <div class="form-group">
            <label for="referrer-email-address">Referrer Email Address <span class="required-star">*</span></label>
            <input type="email" id="referrer-email-address" name="referrer-email-address" required />
            <span class="error-message" id="error-referrer-email-address"></span>
          </div>
        </div>
        
        <button class="submit-button" type="submit" id="submit-button">Submit</button>
      </form>
    </div>

    <div id="status-modal-overlay" class="status-modal-overlay">
      <div class="status-modal-content">
        <span id="status-icon" class="status-icon"></span>
        <p id="status-message"></p>
      </div>
    </div>
    
    <div>
      <button class="close-button" onclick="closeWidget()">Ã—</button>
    </div>

    <script src="js/app.js"></script>
  </body>
</html>